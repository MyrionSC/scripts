" After changes, source .ideavimrc when changed: :source ~/.ideavimrc
" Full docs: https://github.com/JetBrains/ideavim/tree/master/doc
" action docs: https://github.com/JetBrains/ideavim#finding-actions
" list of supported commands: https://github.com/JetBrains/ideavim/wiki/set-commands

" Search for ideavim action with ":actionlist somecommand" or actionlist in terminal
" action can then be executed with ":action ACTION" or mapped with: nmap <leader>h <action>(ACTION) 
" track actions with action (search everything for it): IdeaVim: track action Ids
" can then be mapped with: nmap <leader>h <action>(PreviousTab)

" === Common settings
" docs: https://github.com/JetBrains/ideavim/wiki/%22set%22-commands
set ignorecase smartcase " ignores case if all lowercase, does not if one or more uppercase. ignorecase must be set as well.
set incsearch hlsearch " search highlight while typing
set clipboard+=unnamedplus

" === ideavim plugin emulators
" docs: https://github.com/JetBrains/ideavim/wiki/Emulated-plugins
set surround
set commentary
set argtextobj
let g:argtextobj_pairs="[:],(:),<:>"
set highlightedyank " does not work in Rider?

" === ideavim integrations
set ideajoin " see https://github.com/JetBrains/ideavim/wiki/%60ideajoin%60-examples
set idearefactormode=keep
set scrolloff=10 " minimum number of lines above and below the cursor


" === Mappings
let mapleader=" "
nnoremap <leader>r :action IdeaVim.ReloadVimRc.reload<CR>
nmap <leader>h <action>(PreviousTab)
nmap <leader>l <action>(NextTab)
nmap <leader>bd <action>(CloseEditor)
nmap <leader>i <action>(Generate)
nmap <leader>m <action>(Git.Menu)
nmap <leader>s <action>(QuickChangeScheme)
nmap <leader>e <action>(GotoNextError)
" TODO: open livetemplates for current language

noremap H ^
noremap L $
noremap c "_c
nnoremap d "_d
nnoremap D "_D
nnoremap dd "_dd
vnoremap p "_dP
nnoremap <C-o> :action Back<CR>
nnoremap <C-i> :action Forward<CR>
inoremap jk <ESC>
inoremap kj <ESC>
nmap æ /
nmap Æ ?

inoremap <C-l> {
inoremap <C-m> [

" IDE specific (see examples: https://github.com/JetBrains/ideavim#ide-specific-options)
if has('ide')
    if &ide =~? 'rider'
        nmap gcc :action CommentByLineComment<CR>
        vmap gc :action CommentByLineComment<CR>
    endif
endif

" === Set whether handler should be IDE og vim
" https://github.com/JetBrains/ideavim/blob/master/doc/sethandler.md
sethandler <C-A> a:vim
sethandler <C-B> a:ide
sethandler <C-D> a:vim
sethandler <C-E> a:ide
sethandler <C-F> a:ide
sethandler <C-H> a:ide
sethandler <C-I> a:ide
sethandler <C-J> a:ide
sethandler <C-K> a:vim
sethandler <C-L> n-v:ide i:vim
sethandler <C-M> n-v:ide i:vim
sethandler <C-O> a:ide
sethandler <C-P> a:ide
sethandler <C-R> n:vim
sethandler <C-S> a:ide
sethandler <C-V> i:ide n-v:vim
sethandler <C-W> a:ide
sethandler <C-X> a:vim


