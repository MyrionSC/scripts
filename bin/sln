#!/usr/bin/env python3
import os
import sys
import subprocess

input = sys.argv[1]

stream = "streamlink "

if input.startswith("https://www.twitch.tv/"):
    stream += input 
else:
    stream += "https://www.twitch.tv/" + input

definition = " 720p"

try:
    subprocess.check_output(stream + definition, shell=True)
except subprocess.CalledProcessError as err:
    print("error: 720p not available, using 720p60 instead")
    definition = " 720p60"
    try:
        subprocess.check_output(stream + definition, shell=True)
    except subprocess.CalledProcessError as err2:
        print("error: 720p60 not available either, just using best then!")
        definition = " best"
        subprocess.check_output(stream + definition, shell=True)

# status = os.system(stream + " &")
#> /dev/null 2>&1 


